<ion-view view-title="Statistieken Wedstrijd">
    <ion-content>
		<div class="row">
			<div class="col">
				<h1 class="center">{{game.home}} vs {{game.away}}</h1>
				<h3 class="center">{{homeScore}} - {{awayScore}}</h3>
			</div>
		</div>
		<!-- <button class="button button-block"  ng-click="update()">update</button> -->
	<ion-list>
		<ion-item class="item-stable" ng-click="toggleGroup('gameLog')" ng-class="{active: isGroupShown('gameLog')}">
			  <i class="icon" ng-class="isGroupShown('gameLog') ? 'ion-android-arrow-dropright-circle' : 'ion-android-arrow-dropdown-circle'"></i>
			&nbsp;
			Wedstrijd verslag
		</ion-item>
		<ion-item class="item-accordion" ng-repeat="event in gameLog | orderBy:'time'" ng-show="isGroupShown('gameLog')">
			<standard-time-no-meridian etime='event.time'></standard-time-no-meridian>
			<span ng-if="event.statsType === 'GameEvents'"> Event </span>
			<span ng-if="event.statsType === 'OurGoals'"> Goal voor, <player-name player='players[event.player]' nick-name='useNickNames'></player-name></span>
			<span ng-if="event.statsType === 'TheirGoals'"> Goal tegen </span>
			<span ng-if="event.statsType === 'Cards'"> Kaart 
				<span ng-if="event.type === 'red'">Rood,  </span>
				<span ng-if="event.type === 'yellow'">Geel,  </span>
				<span ng-if="event.type === 'yellow2'">Tweede geel,  </span>
				<player-name player='players[event.player]' nick-name='useNickNames'></player-name>
			</span>
			<span ng-if="event.statsType === 'Changes'"> Wissel 
				<span ng-if="event.type === 'Position'">Positie, <player-name player='players[event.player1]' nick-name='useNickNames'></player-name> voor <player-name player='players[event.player2]' nick-name='useNickNames'></player-name> </span>
				<span ng-if="event.type === 'In/Out'">,  <player-name player='players[event.playerIn]' nick-name='useNickNames'></player-name> voor <player-name player='players[event.playerOut]' nick-name='useNickNames'></player-name> </span>
			</span>
			, {{event.comment}}
			<ion-option-button class="button-assertive" ng-click="$event.stopPropagation(); onItemDelete(event)">Delete</ion-option-button>
			<ion-option-button class="button-dark" ng-click="$event.stopPropagation(); editStat(event)">Edit</ion-option-button>

		</ion-item>
		<ion-item class="item-stable" ng-click="toggleGroup('gameTimes')" ng-class="{active: isGroupShown('gameTimes')}">
			  <i class="icon" ng-class="isGroupShown('gameTimes') ? 'ion-android-arrow-dropright-circle' : 'ion-android-arrow-dropdown-circle'"></i>
			&nbsp;
			Wedstrijd tijden
		</ion-item>
		<ion-item class="item-accordion" ng-show="isGroupShown('gameTimes')">
			<div class="col col-30 float-left">Eerste helft:</div>
			<div class="col"><ionic-timepicker etime="firstHalfStart" format="24" step="1" callback="timePickerCallback">
					<button class="button button-stable"> <standard-time-no-meridian etime='firstHalfStart'></standard-time-no-meridian></button>
			</ionic-timepicker>
			tot 
			<ionic-timepicker etime="firstHalfEnd" format="24" step="1" callback="timePickerCallback">
					<button class="button button-stable"> <standard-time-no-meridian etime='firstHalfEnd'></standard-time-no-meridian></button>
			</ionic-timepicker>
			</div>
			<div class="col col-30 float-left">Tweede helft:</div>
			<div class="col"><ionic-timepicker etime="secondHalfStart" format="24" step="1" callback="timePickerCallback">
					<button class="button button-stable"> <standard-time-no-meridian etime='secondHalfStart'></standard-time-no-meridian></button>
			</ionic-timepicker>
			tot 
			<ionic-timepicker etime="secondHalfEnd" format="24" step="1" callback="timePickerCallback">
					<button class="button button-stable"> <standard-time-no-meridian etime='secondHalfEnd'></standard-time-no-meridian></button>
				</ionic-timepicker>
				</div>
		</ion-item>
		<ion-item class="item-stable" ng-click="toggleGroup('basisTeam')" ng-class="{active: isGroupShown('basisTeam')}">
			  <i class="icon" ng-class="isGroupShown('basisTeam') ? 'ion-android-arrow-dropright-circle' : 'ion-android-arrow-dropdown-circle'"></i>
			&nbsp;
			Basis elftal
		</ion-item>
		<ion-item class="item-accordion" ng-show="isGroupShown('basisTeam')">
			basis elftal:
			<label class="item item-input item-select">
				<span class="input-label">externe spelers</span>
				<select ng-model="externalPlayers" ng-change="updatePlayerList(externalPlayers)">
					<option value="0">0</option>
					<option value="1">1</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5</option>
					<option value="6">6</option>
					<option value="7">7</option>
					<option value="8">8</option>
					<option value="9">9</option>
					<option value="10">10</option>
				</select>
			</label>
			<label class="item item-input " ng-repeat="(key,player) in externalPlayerNames">
				<span class="input-label">naam {{key}}</span>
				<input type="text" ng-model="player.firstName"/>
			</label>
			<div ng-if="externalPlayers > 0">
					<button class="button button-block" ng-click="storeExternalNames()">save names</button>
			</div>
			<div ng-if="isGroupShown('basisTeam')">
				<playing-field draw-players="basisLineUp" draw-changes="basisChanges" players="players" scroll-enabled="isScrollEnabled(value)" event-function="eventDelegator(type, basis, eventData)" type="3" grid="false" drawspeed="50"></playing-field>
				
				<div class="buttons">
					<button class="button button-block"  ng-click="storeBasis(tactic)">save opstelling</button>
				</div>
			</div>
			
		</ion-item>
		<ion-item class="item-stable" ng-click="toggleGroup('newStat')" ng-class="{active: isGroupShown('newStat')}">
			  <i class="icon" ng-class="isGroupShown('newStat') ? 'ion-android-arrow-dropright-circle' : 'ion-android-arrow-dropdown-circle'"></i>
			&nbsp;
			Gebeurtenis
		</ion-item>
		<ion-item class="item-accordion" ng-show="isGroupShown('newStat')">
			<div class="item item-divider">Geef een gebeurtenis door:</div>
			<label class="item item-input item-select">
				<span class="input-label">Type</span>
				<select ng-model="selectedType" ng-options="type as type for type in typeStats" ng-change="updateEventTime()">
					<option> type </option>
				</select>
			</label>
			<div ng-if="selectedType === 'wissel'"> <!-- this  is  the div  voor wissel-->
				<label class="item item-input item-select">
					<span class="input-label">Speler Uit</span>
					<select ng-model="selectedPlayerOut">
						<option ng-repeat="(id,value) in actualPlayers" value="{{id}}" player-name player='players[id]' nick-name='useNickNames' />
					</select>
				</label>
				<label class="item item-input item-select">
					<span class="input-label">Speler In</span>
					<select ng-model="selectedPlayerIn">
						<option ng-repeat="(id,value) in changes" value="{{id}}" player-name player='players[id]' nick-name='useNickNames' />
					</select>
				</label>
				<label class="item item-input">
				<ionic-timepicker etime="eventTime" format="24" step="1" callback="timePickerCallback">
					tijdstip: <button class="button button-stable"> <standard-time-no-meridian etime='eventTime'></standard-time-no-meridian></button>
				</ionic-timepicker>
				</label>
				<label class="item item-input">
					<span class="input-label">commentaar</span>
					<input type="text" ng-model="comment"/>
				</label>
				<div class="buttons">
					<button class="button button-bq" ng-click="saveChange(selectedPlayerIn,selectedPlayerOut,eventTime,comment)">save</button>
				</div>
			</div>
			<div ng-if="selectedType === 'positie wissel'"> <!-- this is the div voor positie wissel-->
				<label class="item item-input item-select">
					<span class="input-label">Speler</span>
					<select ng-model="selectedPlayer1">
						<option ng-repeat="(id,value) in actualPlayers" value="{{id}}" player-name player='players[id]' nick-name='useNickNames' />
					</select>
				</label>
				<label class="item item-input item-select">
					<span class="input-label">Speler</span>
					<select ng-model="selectedPlayer2">
						<option ng-repeat="(id,value) in actualPlayers" value="{{id}}" player-name player='players[id]' nick-name='useNickNames' />
					</select>
				</label>
				<label class="item item-input">
				<ionic-timepicker etime="eventTime" format="24" step="1" callback="timePickerCallback">
					tijdstip: <button class="button button-stable"> <standard-time-no-meridian etime='eventTime'></standard-time-no-meridian></button>
				</ionic-timepicker>
				</label>
				<label class="item item-input">
					<span class="input-label">commentaar</span>
					<input type="text" ng-model="comment"/>
				</label>
				<div class="buttons">
					<button class="button button-bq" ng-click="savePosChange(selectedPlayer1,selectedPlayer2,eventTime,comment)">save</button>
				</div>
			</div>
			<div ng-if="selectedType === 'goal voor'"> <!-- this is the div voor goals voor-->
				<label class="item item-input item-select">
					<span class="input-label">Speler</span>
					<select ng-model="selectedPlayer">
						<option ng-repeat="(id,value) in actualPlayers" value="{{id}}" player-name player='players[id]' nick-name='useNickNames' />
					</select>
				</label>
				<label class="item item-input">
				<ionic-timepicker etime="eventTime" format="24" step="1" callback="timePickerCallback">
					tijdstip: <button class="button button-stable"> <standard-time-no-meridian etime='eventTime'></standard-time-no-meridian></button>
				</ionic-timepicker>
				</label>
				<label class="item item-input">
					<span class="input-label">commentaar</span>
					<input type="text" ng-model="comment"/>
				</label>
				<div class="buttons">
					<button class="button button-bq" ng-click="saveOurGoal(selectedPlayer,eventTime,comment)">save</button>
				</div>
			</div>
			<div ng-if="selectedType === 'goal tegen'"> <!-- this is the div voor goals tegen-->
				<label class="item item-input">
				<ionic-timepicker etime="eventTime" format="24" step="1" callback="timePickerCallback">
					tijdstip: <button class="button button-stable"> <standard-time-no-meridian etime='eventTime'></standard-time-no-meridian></button>
				</ionic-timepicker>
				</label>
				<label class="item item-input">
					<span class="input-label">commentaar</span>
					<input type="text" ng-model="comment"/>
				</label>
				<div class="buttons">
					<button class="button button-bq" ng-click="saveTheirGoal(eventTime,comment)">save</button>
				</div>
			</div>
			<div ng-if="selectedType === 'gele kaart'"> <!-- this is the div voor gele kaart-->
				<label class="item item-input item-select">
					<span class="input-label">Speler</span>
					<select ng-model="selectedPlayer">
						<option ng-repeat="(id,value) in presentPlayers" value="{{id}}" player-name player='players[id]' nick-name='useNickNames' />
					</select>
				</label>
				<label class="item item-input">
				<ionic-timepicker etime="eventTime" format="24" step="1" callback="timePickerCallback">
					tijdstip: <button class="button button-stable"> <standard-time-no-meridian etime='eventTime'></standard-time-no-meridian></button>
				</ionic-timepicker>
				</label>
				<label class="item item-input">
					<span class="input-label">commentaar</span>
					<input type="text" ng-model="comment"/>
				</label>
				<div class="buttons">
					<button class="button button-bq" ng-click="saveCard(selectedPlayer,'yellow',eventTime,comment)">save</button>
				</div>
			</div>
			<div ng-if="selectedType === 'rode kaart'"> <!-- this is the div voor rode kaart-->
				<label class="item item-input item-select">
					<span class="input-label">Speler</span>
					<select ng-model="selectedPlayer">
						<option ng-repeat="(id,value) in presentPlayers" value="{{id}}" player-name player='players[id]' nick-name='useNickNames' />
					</select>
				</label>
				<label class="item item-input">
				<ionic-timepicker etime="eventTime" format="24" step="1" callback="timePickerCallback">
					tijdstip: <button class="button button-stable"> <standard-time-no-meridian etime='eventTime'></standard-time-no-meridian></button>
				</ionic-timepicker>
				</label>
				<label class="item item-input">
					<span class="input-label">commentaar</span>
					<input type="text" ng-model="comment"/>
				</label>
				<div class="buttons">
					<button class="button button-bq" ng-click="saveCard(selectedPlayer,'red',eventTime,comment)">save</button>
				</div>
			</div>
			<div ng-if="selectedType === 'event'"> <!-- this is the div voor GameEvents-->
				<label class="item item-input">
				<ionic-timepicker etime="eventTime" format="24" step="1" callback="timePickerCallback">
					tijdstip: <button class="button button-stable"> <standard-time-no-meridian etime='eventTime'></standard-time-no-meridian></button>
				</ionic-timepicker>
				</label>
				<label class="item item-input">
					<span class="input-label">commentaar</span>
					<input type="text" ng-model="comment"/>
				</label>
				<div class="buttons">
					<button class="button button-bq" ng-click="saveGameEvent(eventTime,comment)">save</button>
				</div>
			</div>
		</ion-item>
		<ion-item class="item-stable" ng-click="toggleGroup('currentTeam')" ng-class="{active: isGroupShown('currentTeam')}">
			  <i class="icon" ng-class="isGroupShown('currentTeam') ? 'ion-android-arrow-dropright-circle' : 'ion-android-arrow-dropdown-circle'"></i>
			&nbsp;
			Actuele opstelling
		</ion-item>
		<ion-item class="item-accordion" ng-show="isGroupShown('currentTeam')">	
		<div ng-if="isGroupShown('currentTeam')">
			<playing-field draw-players="actualPlayers" draw-changes="changes" players="players" scroll-enabled="isScrollEnabled(value)" event-function="eventDelegator(type, basis, eventData)" type="4" grid="false" drawspeed="50"></playing-field>	
			</div>
		</ion-item>
	</ion-list>
    </ion-content>
</ion-view>
