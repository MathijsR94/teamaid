<ion-view view-title="Statistieken Wedstrijd">
    <ion-content>
        <div class="row">
            <div class="col col-40"><h4 class="center">{{game.home}}</h4></div>
            <div class="col col-20"><h3 class="center">{{homeScore}} - {{awayScore}}</h3></div>
            <div class="col col-40"><h4 class="center">{{game.away}}</h4></div>
        </div>
        <!-- <button class="button button-block"  ng-click="update()">update</button> -->
        <ion-list id="game-stats">
            <ion-item class="item-stable" ng-click="toggleGroup('gameLog')"
                      ng-class="{active: isGroupShown('gameLog')}">
                <i class="icon"
                   ng-class="isGroupShown('gameLog') ? 'ion-android-arrow-dropright-circle' : 'ion-android-arrow-dropdown-circle'"></i>
                &nbsp;
                Wedstrijd verslag
            </ion-item>
            <ion-item class="item-accordion stat" ng-show="isGroupShown('gameLog')"
                      ng-repeat="event in gameLog | orderBy:'time'">
                <section class="row no-padding">
                    <div class="col no-padding"
                         ng-class="event.statsType === 'OurGoals' || event.statsType === 'Changes' ? 'left' : 'right'">
                        <div class="row no-padding">
                            <div class="col">
                                <i ng-if="event.statsType === 'OurGoals'"
                                   class="icon ion-ios-football"></i>
                                <i ng-if="event.statsType === 'Theirgoals'"
                                   class="icon ion-ios-football"></i>
                                <i ng-if="event.statsType === 'GameEvents'"
                                   class="icon ion-ios-list"></i>
                                <img src="../img/red-card.svg" width="16" height="16"
                                     ng-if="event.statsType === 'red'"
                                        />
                                <img src="../img/yellow-card.svg" width="16" height="16"
                                     ng-if="event.statsType === 'yellow'"
                                        />
                                <img src="../img/yellow-red-card.svg" width="16" height="16"
                                     ng-if="event.statsType === 'yellow2'"
                                        />
                                <i ng-if="event.statsType === 'Changes'"
                                   class="icon ion-loop"></i>

                                <player-name player='players[event.player]' nick-name='useNickNames'></player-name>
                                </span>

                                <div ng-if="event.statsType === 'Changes'" class="changes">
                                    <span>Wissel</span>
							<span ng-if="event.type === 'Position'">Positie <player-name
                                    player='players[event.player1]' nick-name='useNickNames'></player-name> voor <player-name
                                    player='players[event.player2]' nick-name='useNickNames'></player-name> </span>
							<span ng-if="event.type === 'Move'">Verplaatst<player-name player='players[event.player]'
                                                                                       nick-name='useNickNames'></player-name></span>

                                    <p ng-if="event.type === 'In/Out'" class="balanced">
                                        <player-name
                                                player='players[event.playerIn]'
                                                nick-name='useNickNames'></player-name>
                                    </p>
                                    <p ng-if="event.type === 'In/Out'" class="assertive">
                                        <player-name
                                                player='players[event.playerOut]'
                                                nick-name='useNickNames'></player-name>
                                    </p>
                                </div>
                                <p>
                                    <standard-time-no-meridian etime='event.time'></standard-time-no-meridian>
                                <span ng-if="event.statsType === 'OurGoals'">{{event.comment}}</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <ion-option-button class="button-assertive"
                                       ng-click="$event.stopPropagation(); onItemDelete(event)">Delete
                    </ion-option-button>
                    <ion-option-button class="button-dark"
                                       ng-click="$event.stopPropagation(); editStat(event)">Edit
                    </ion-option-button>

                </section>

            </ion-item>
            <ion-item class="item-stable" ng-click="toggleGroup('gameTimes')"
                      ng-class="{active: isGroupShown('gameTimes')}">
                <i class="icon"
                   ng-class="isGroupShown('gameTimes') ? 'ion-android-arrow-dropright-circle' : 'ion-android-arrow-dropdown-circle'"></i>
                &nbsp;
                Wedstrijd tijden
            </ion-item>
            <ion-item class="item-accordion" ng-show="isGroupShown('gameTimes')">
                <div class="col col-30 float-left">Eerste helft:</div>
                <div class="col">
                    <button class="button button-stable" ng-click="openTimePicker('firstHalfStart')">
                        <standard-time-no-meridian etime='firstHalfStart'></standard-time-no-meridian>
                    </button>
                    tot
                    <button class="button button-stable" ng-click="openTimePicker('firstHalfEnd')">
                        <standard-time-no-meridian etime='firstHalfEnd'></standard-time-no-meridian>
                    </button>
                </div>
                <div class="col col-30 float-left">Tweede helft:</div>
                <div class="col">
                    <button class="button button-stable" ng-click="openTimePicker('secondHalfStart')">
                        <standard-time-no-meridian etime='secondHalfStart'></standard-time-no-meridian>
                    </button>
                    tot
                    <button class="button button-stable" ng-click="openTimePicker('secondHalfEnd')">
                        <standard-time-no-meridian etime='secondHalfEnd'></standard-time-no-meridian>
                    </button>
                </div>

                <div class="buttons">
                    <button class="button button-block" ng-click="storeTimes()">save tijden</button>
                </div>

            </ion-item>
            <ion-item class="item-stable" ng-click="toggleGroup('basisTeam')"
                      ng-class="{active: isGroupShown('basisTeam')}">
                <i class="icon"
                   ng-class="isGroupShown('basisTeam') ? 'ion-android-arrow-dropright-circle' : 'ion-android-arrow-dropdown-circle'"></i>
                &nbsp;
                Basis elftal
            </ion-item>
            <ion-item class="item-accordion" ng-show="isGroupShown('basisTeam')">
                basis elftal:
                <label class="item item-input item-select">
                    <span class="input-label">externe spelers</span>
                    <select ng-model="externalPlayers" ng-change="updatePlayerList(externalPlayers)">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                    </select>
                </label>
                <label class="item item-input " ng-repeat="(key,player) in externalPlayerNames">
                    <span class="input-label">naam {{key}}</span>
                    <input type="text" ng-model="player.firstName"/>
                </label>

                <div ng-if="externalPlayers > 0">
                    <button class="button button-block" ng-click="storeExternalNames()">save names</button>
                </div>
                <div ng-if="isGroupShown('basisTeam')">
                    <playing-field draw-players="basisLineUp" draw-changes="basisChanges" players="players"
                                   scroll-enabled="isScrollEnabled(value)"
                                   event-function="eventDelegator(type, basis, eventData)" type="3" grid="false"
                                   drawspeed="50"></playing-field>

                    <div class="buttons">
                        <button class="button button-block" ng-click="storeBasis(tactic)">save opstelling</button>
                    </div>
                </div>

            </ion-item>
            <ion-item class="item-stable" ng-click="toggleGroup('currentTeam')"
                      ng-class="{active: isGroupShown('currentTeam')}">
                <i class="icon"
                   ng-class="isGroupShown('currentTeam') ? 'ion-android-arrow-dropright-circle' : 'ion-android-arrow-dropdown-circle'"></i>
                &nbsp;
                Actuele opstelling
            </ion-item>
            <ion-item class="item-accordion" ng-show="isGroupShown('currentTeam')">
                <div ng-if="isGroupShown('currentTeam')">
                    <playing-field draw-players="actualPlayers" draw-changes="changes" players="players"
                                   scroll-enabled="isScrollEnabled(value)"
                                   event-function="eventDelegator(type, basis, eventData)" type="4" grid="false"
                                   drawspeed="50"></playing-field>
                </div>
            </ion-item>
        </ion-list>
    </ion-content>
</ion-view>
