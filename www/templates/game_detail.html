<ion-view view-title="Wedstrijd info">
    <ion-content>
        <ion-list>
            <div class="header">
                <h3 class="center">{{game.home}} vs {{game.away}}</h3>

                <h3 class="center">{{homeScore}} - {{awayScore}}</h3>
                <span class="center">Datum: {{ game.date | date:'dd - MM - yyyy' }}</span>
        <span class="center">Aanvang wedstrijd: <standard-time-no-meridian etime='game.time'></standard-time-no-meridian></span>
        <span class="center">Verzameltijd: <standard-time-no-meridian etime='game.collect'></standard-time-no-meridian></span>

                <div ng-if="settings.dutyGames === true">
                    <span ng-repeat="(id,value) in game.Duty" class="center">Corvee: <player-name player='players[id]' nick-name='useNickNames'></player-name></span>
                </div>
            </div>
            <div ng-show="!isPast">
                <h3 class="center">Geef hier je beschikbaarheid op</h3>
                <span class="center">Ik ben</span>

                <div class="button-bar">
                    <a ng-class="{ 'button button-balanced' : present , 'button button-stable' : !present }"
                       ng-click="changeAttendance('present');">aanwezig</a>
                    <a ng-class="{ 'button button-assertive' : absent , 'button button-stable' : !absent  }"
                       ng-click="changeAttendance('absent');">afwezig</a>
                    <!--<a ng-class="{ 'button button-royal' : unknown , 'button button-stable' : !unknown}">onbekend</a>-->
                </div>
            </div>
            <br>

            <ion-item class="item-stable" ng-click="toggleGroup('attendance')"
                      ng-class="{active: isGroupShown('attendance')}">
                <i class="icon"
                   ng-class="isGroupShown('attendance') ? 'ion-android-arrow-dropright-circle' : 'ion-android-arrow-dropdown-circle'"></i>
                &nbsp;
                Aanwezigheid (<font color='green'>{{numberPresent}}</font>)(<font color='red'>{{numberAbsent}}</font>)({{numberUnknown}})
            </ion-item>
            <ion-item class="item-accordion" ng-show="isGroupShown('attendance')">
                <div class="row responsive-sm">
                    <div class="col">
                        <div class="item item-divider">
                            <span>Aanwezig ({{numberPresent}})</span>
                        </div>
                        <ion-item ng-repeat="(id,value) in game.Present">
                            <player-name player='players[id]' nick-name='useNickNames'></player-name>
                            <!-- <ion-option-button class="button-balanced" ng-if="isAdmin" ng-click="$event.stopPropagation(); forceAttendance('present',id)">P</ion-option-button> -->
                            <ion-option-button class="button-assertive" ng-if="isAdmin" ng-click="$event.stopPropagation(); forceAttendance('absent',id)">A
                            </ion-option-button>
                            <ion-option-button class="button-royal" ng-if="isAdmin" ng-click="$event.stopPropagation(); forceAttendance('unknown',id)">U
                            </ion-option-button>
                        </ion-item>
                    </div>
                    <div class="col">
                        <div class="item item-divider">
                            <span>Afwezig ({{numberAbsent}})</span>
                        </div>
                        <ion-item ng-repeat="(id,value) in game.Absent">
                            <player-name player='players[id]' nick-name='useNickNames'></player-name>
                            <ion-option-button class="button-balanced" ng-if="isAdmin"
                                               ng-click="$event.stopPropagation(); forceAttendance('present',id)">P
                            </ion-option-button>
                            <!-- <ion-option-button class="button-assertive" ng-if="isAdmin" ng-click="$event.stopPropagation(); forceAttendance('absent',id)">A</ion-option-button> -->
                            <ion-option-button class="button-royal" ng-if="isAdmin"
                                               ng-click="$event.stopPropagation(); forceAttendance('unknown',id)">U
                            </ion-option-button>
                        </ion-item>
                    </div>
                    <div class="col">
                        <div class="item item-divider">
                            <span>Onbekend ({{numberUnknown}})</span>
                        </div>

                        <ion-list>
                            <ion-item ng-repeat="(key,player) in unknownPlayers">
                                <player-name player='player' nick-name='useNickNames'></player-name>
                                <ion-option-button class="button-balanced" ng-if="isAdmin"
                                                   ng-click="$event.stopPropagation(); forceAttendance('present',key)">P
                                </ion-option-button>
                                <ion-option-button class="button-assertive" ng-if="isAdmin"
                                                   ng-click="$event.stopPropagation(); forceAttendance('absent',key)">A
                                </ion-option-button>
                                <!-- <ion-option-button class="button-royal" ng-if="isAdmin" ng-click="$event.stopPropagation(); forceAttendance('unknown',key)">U</ion-option-button> -->

                            </ion-item>
                        </ion-list>
                    </div>
                </div>
            </ion-item>
            <ion-item class="item-stable" ng-click="toggleGroup('gameLog')"
                      ng-class="{active: isGroupShown('gameLog')}">
                <i class="icon"
                   ng-class="isGroupShown('gameLog') ? 'ion-android-arrow-dropright-circle' : 'ion-android-arrow-dropdown-circle'"></i>
                &nbsp;
                Wedstrijd verslag
            </ion-item>
            <ion-item class="item-accordion row" ng-repeat="event in gameLog | orderObjectBy:'time'"
                      ng-show="isGroupShown('gameLog')">
                <div class="col col-20">
                    <standard-time-no-meridian etime='event.time'></standard-time-no-meridian>
                </div>
                <div class="col col-20"><span ng-if="event.statsType === 'GameEvents'"> Event </span>
                    <span ng-if="event.statsType === 'OurGoals'"> <i class="icon ion-ios-football positive"></i> Goal voor, <player-name
                            player='players[event.player]' nick-name='useNickNames'></player-name></span>
                    <span ng-if="event.statsType === 'TheirGoals'"><i
                            class="icon ion-ios-football assertive"></i></span>
        <span ng-if="event.statsType === 'Cards'"> Kaart
        <span ng-if="event.type === 'red'">Rood,  </span>
        <span ng-if="event.type === 'yellow'">Geel,  </span>
        <span ng-if="event.type === 'yellow2'">Tweede geel,  </span>
        <player-name player='players[event.player]' nick-name='useNickNames'></player-name>
        </span>
        <span ng-if="event.statsType === 'Changes'"> Wissel
        <span ng-if="event.type === 'Position'">Positie,  <player-name player='players[event.player1]'
                                                                       nick-name='useNickNames'></player-name> voor <player-name
                player='players[event.player2]' nick-name='useNickNames'></player-name> </span>
        <span ng-if="event.type === 'In/Out'">,  <player-name player='players[event.playerIn]'
                                                              nick-name='useNickNames'></player-name> voor <player-name
                player='players[event.playerOut]' nick-name='useNickNames'></player-name> </span>
        </span>
                    , {{event.comment}}
                </div>
            </ion-item>
            <ion-item class="item-stable" ng-click="toggleGroup('BasisTeam')"
                      ng-class="{active: isGroupShown('BasisTeam')}">
                <i class="icon"
                   ng-class="isGroupShown('BasisTeam') ? 'ion-android-arrow-dropright-circle' : 'ion-android-arrow-dropdown-circle'"></i>
                &nbsp;
                basis opstelling
            </ion-item>
            <ion-item class="item-accordion" ng-show="isGroupShown('BasisTeam')">
                <div ng-if="showBasis === true">
                    <playing-field draw-players="basis" draw-changes="changes" players="players" scroll-enabled="isScrollEnabled(value)" type="1" grid="false" drawspeed="100"></playing-field>
                </div>
                <div ng-if="showBasis === false">
                    De basis opstelling is nog niet bekend
                </div>
            </ion-item>
        </ion-list>
    </ion-content>
</ion-view>